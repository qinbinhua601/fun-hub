{"version":3,"sources":["index.js"],"names":["Vue","component","VueInfiniteLoading","default","indexView","el","name","data","showDropdown","list","hasMore","favoriteList","localStorage","getItem","JSON","parse","searchingText","categories","text","value","currentId","selected","computed","filteredList","result","forEach","item","index","title","indexOf","searchedText","replace","push","methods","getMore","axios","get","params","cate","then","status","length","concat","map","isFavorite","includes","aid","navView","videoCount","$refs","infiniteLoading","$emit","addToFavorite","setItem","stringify","removeFromFavorite","findIndex","i","splice","resetCate","mounted"],"mappings":"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","file":"index.js","sourcesContent":["Vue.component(\"vue-infinite-loading\", VueInfiniteLoading.default);\nlet indexView = new Vue({\n  el: \"#app\",\n  name: \"app\",\n  data: {\n    showDropdown: false,\n    list: [],\n    hasMore: true,\n    favoriteList: localStorage.getItem(\"favoriteList\")\n      ? JSON.parse(localStorage.getItem(\"favoriteList\"))\n      : [],\n    searchingText: \"\",\n    categories: {\n      0: {\n        text: \"日剧\",\n        value: 0,\n        currentId: 0\n      },\n      1: {\n        text: \"动漫\",\n        value: 1,\n        currentId: 0\n      },\n      // 2: {\n      //   text: \"fixsub\",\n      //   value: 2,\n      //   currentId: 0\n      // },\n      3: {\n        text: \"QQ\",\n        value: 3,\n        currentId: 0\n      },\n      4: {\n        text: '推荐',\n        value: 4,\n        currentId: 0\n      },\n      5: {\n        text: '优酷动漫',\n        value: 5,\n        currentId: 0\n      }\n    },\n    selected: localStorage.getItem(\"defaultCate\")\n      ? JSON.parse(localStorage.getItem(\"defaultCate\"))\n      : 0\n  },\n  computed: {\n    filteredList() {\n      var result = [];\n      this.list.forEach((item, index) => {\n        if (this.list[index].title.indexOf(this.searchingText) !== -1) {\n          item.searchedText = item.title.replace(this.searchingText, `<mark>${this.searchingText}</mark>`);\n          if (!this.searchingText) {\n            item.searchedText = item.title\n          }\n          result.push(item);\n        }\n      });\n      return result;\n    },\n    currentId() {\n      return this.categories[+this.selected].currentId;\n    }\n  },\n  methods: {\n    getMore() {\n      if (!this.hasMore) {\n        return\n      }\n\n      this.categories[this.selected].currentId =\n        this.categories[this.selected].currentId + 1;\n      axios\n        .get(\"/index/\" + this.currentId, {\n          params: {\n            cate: this.selected\n          }\n        })\n        .then(({ status, data }) => {\n          if (data.length) {\n            this.list = this.list.concat(\n              data.map(item => {\n                item.isFavorite = this.favoriteList.includes(item.aid);\n                item.searchedText = item.title;\n                return item;\n              })\n            );\n          }\n          navView.videoCount = this.list.length;\n          if (data.length) {\n            this.$refs.infiniteLoading.$emit(\"$InfiniteLoading:loaded\");\n          } else {\n            this.$refs.infiniteLoading.$emit(\"$InfiniteLoading:complete\");\n            this.hasMore = false\n          }\n        });\n    },\n    addToFavorite(item) {\n      this.favoriteList.push(item.aid);\n      localStorage.setItem(\"favoriteList\", JSON.stringify(this.favoriteList));\n    },\n    removeFromFavorite(item) {\n      var index = this.favoriteList.findIndex(function(i) {\n        return i === item.aid;\n      });\n      this.favoriteList.splice(index, 1);\n      localStorage.setItem(\"favoriteList\", JSON.stringify(this.favoriteList));\n    },\n    resetCate(item) {\n      item.currentId = 0;\n      this.list = [];\n      this.showDropdown = false;\n      this.selected = item.value;\n      this.searchingText = '';\n      this.$refs.infiniteLoading.$emit(\"$InfiniteLoading:reset\");\n      localStorage.setItem(\"defaultCate\", JSON.stringify(this.selected));\n      this.hasMore = true;\n      this.getMore();\n    }\n  },\n  mounted() {}\n});"]}