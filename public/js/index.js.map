{"version":3,"sources":["index.js"],"names":["Vue","component","VueInfiniteLoading","default","indexView","el","name","data","list","hasMore","favoriteList","localStorage","getItem","JSON","parse","searchingText","categories","text","value","currentId","selected","computed","filteredList","result","forEach","item","index","title","indexOf","push","methods","getMore","axios","get","params","cate","then","status","length","concat","map","isFavorite","includes","aid","navView","videoCount","$refs","infiniteLoading","$emit","addToFavorite","setItem","stringify","removeFromFavorite","findIndex","i","splice","resetCate","mounted"],"mappings":"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","file":"index.js","sourcesContent":["Vue.component(\"vue-infinite-loading\", VueInfiniteLoading.default);\r\nlet indexView = new Vue({\r\n  el: \"#app\",\r\n  name: \"app\",\r\n  data: {\r\n    list: [],\r\n    hasMore: true,\r\n    favoriteList: localStorage.getItem(\"favoriteList\")\r\n      ? JSON.parse(localStorage.getItem(\"favoriteList\"))\r\n      : [],\r\n    searchingText: \"\",\r\n    categories: {\r\n      0: {\r\n        text: \"日剧\",\r\n        value: 0,\r\n        currentId: 0\r\n      },\r\n      1: {\r\n        text: \"动漫\",\r\n        value: 1,\r\n        currentId: 0\r\n      },\r\n      // 2: {\r\n      //   text: \"fixsub\",\r\n      //   value: 2,\r\n      //   currentId: 0\r\n      // },\r\n      3: {\r\n        text: \"QQ\",\r\n        value: 3,\r\n        currentId: 0\r\n      },\r\n      4: {\r\n        text: '推荐',\r\n        value: 4,\r\n        currentId: 0\r\n      }\r\n    },\r\n    selected: localStorage.getItem(\"defaultCate\")\r\n      ? JSON.parse(localStorage.getItem(\"defaultCate\"))\r\n      : 0\r\n  },\r\n  computed: {\r\n    filteredList() {\r\n      var result = [];\r\n      this.list.forEach((item, index) => {\r\n        if (this.list[index].title.indexOf(this.searchingText) !== -1) {\r\n          result.push(item);\r\n        }\r\n      });\r\n      return result;\r\n    },\r\n    currentId() {\r\n      return this.categories[+this.selected].currentId;\r\n    }\r\n  },\r\n  methods: {\r\n    getMore() {\r\n      this.categories[this.selected].currentId =\r\n        this.categories[this.selected].currentId + 1;\r\n      axios\r\n        .get(\"/index/\" + this.currentId, {\r\n          params: {\r\n            cate: this.selected\r\n          }\r\n        })\r\n        .then(({ status, data }) => {\r\n          if (data.length) {\r\n            this.list = this.list.concat(\r\n              data.map(item => {\r\n                item.isFavorite = this.favoriteList.includes(item.aid);\r\n                return item;\r\n              })\r\n            );\r\n          }\r\n          navView.videoCount = this.list.length;\r\n          if (data.length) {\r\n            this.$refs.infiniteLoading.$emit(\"$InfiniteLoading:loaded\");\r\n          } else {\r\n            this.$refs.infiniteLoading.$emit(\"$InfiniteLoading:complete\");\r\n          }\r\n        });\r\n    },\r\n    addToFavorite(item) {\r\n      this.favoriteList.push(item.aid);\r\n      localStorage.setItem(\"favoriteList\", JSON.stringify(this.favoriteList));\r\n    },\r\n    removeFromFavorite(item) {\r\n      var index = this.favoriteList.findIndex(function(i) {\r\n        return i === item.aid;\r\n      });\r\n      this.favoriteList.splice(index, 1);\r\n      localStorage.setItem(\"favoriteList\", JSON.stringify(this.favoriteList));\r\n    },\r\n    resetCate() {\r\n      this.list = [];\r\n      this.getMore();\r\n      this.$refs.infiniteLoading.$emit(\"$InfiniteLoading:reset\");\r\n      localStorage.setItem(\"defaultCate\", JSON.stringify(this.selected));\r\n    }\r\n  },\r\n  mounted() {}\r\n});\r\n"]}