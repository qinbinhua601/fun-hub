{"version":3,"sources":["index.js"],"names":["Vue","component","VueInfiniteLoading","default","indexView","el","name","data","list","hasMore","favoriteList","localStorage","getItem","JSON","parse","searchingText","categories","text","value","currentId","selected","computed","filteredList","result","forEach","item","index","title","indexOf","push","methods","getMore","axios","get","params","cate","then","status","length","concat","map","isFavorite","includes","aid","$refs","infiniteLoading","$emit","onCardClick","redirectUrl","console","log","addToFavorite","setItem","stringify","removeFromFavorite","findIndex","i","splice","openUrl","url","a","document","createElement","setAttribute","click","resetCate","mounted"],"mappings":";;AAAAA,IAAIC,SAAJ,CAAc,sBAAd,EAAsCC,mBAAmBC,OAAzD;AACA,IAAIC,YAAY,IAAIJ,GAAJ,CAAQ;AACtBK,MAAI,MADkB;AAEtBC,QAAM,KAFgB;AAGtBC,QAAM;AACJC,UAAM,EADF;AAEJC,aAAS,IAFL;AAGJC,kBAAcC,aAAaC,OAAb,CAAqB,cAArB,IAAuCC,KAAKC,KAAL,CAAWH,aAAaC,OAAb,CAAqB,cAArB,CAAX,CAAvC,GAA0F,EAHpG;AAIJG,mBAAe,EAJX;AAKJC,gBAAY,CACV;AACEC,YAAM,IADR;AAEEC,aAAO,CAFT;AAGEC,iBAAW;AAHb,KADU,EAMV;AACEF,YAAM,IADR;AAEEC,aAAO,CAFT;AAGEC,iBAAW;AAHb,KANU,CALR;AAiBJC,cAAUT,aAAaC,OAAb,CAAqB,aAArB,IAAsCC,KAAKC,KAAL,CAAWH,aAAaC,OAAb,CAAqB,aAArB,CAAX,CAAtC,GAAwF;AAjB9F,GAHgB;AAsBtBS,YAAU;AACRC,gBADQ,0BACO;AAAA;;AACb,UAAIC,SAAS,EAAb;AACA,WAAKf,IAAL,CAAUgB,OAAV,CAAkB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACjC,YAAK,MAAKlB,IAAL,CAAUkB,KAAV,EAAiBC,KAAjB,CAAuBC,OAAvB,CAA+B,MAAKb,aAApC,MAAuD,CAAC,CAA7D,EAAiE;AAC/DQ,iBAAOM,IAAP,CAAYJ,IAAZ;AACD;AACF,OAJD;AAKA,aAAOF,MAAP;AACD,KATO;AAURJ,aAVQ,uBAUI;AACV,aAAO,KAAKH,UAAL,CAAgB,CAAC,KAAKI,QAAtB,EAAgCD,SAAvC;AACD;AAZO,GAtBY;AAoCtBW,WAAS;AACPC,WADO,qBACG;AAAA;;AACR,WAAKf,UAAL,CAAgB,KAAKI,QAArB,EAA+BD,SAA/B,GAA2C,KAAKH,UAAL,CAAgB,KAAKI,QAArB,EAA+BD,SAA/B,GAA2C,CAAtF;AACAa,YAAMC,GAAN,CAAU,YAAY,KAAKd,SAA3B,EAAsC;AAClCe,gBAAQ;AACNC,gBAAM,KAAKf;AADL;AAD0B,OAAtC,EAKGgB,IALH,CAKQ,gBAAsB;AAAA,YAAnBC,MAAmB,QAAnBA,MAAmB;AAAA,YAAX9B,IAAW,QAAXA,IAAW;;AAC1B,YAAGA,KAAK+B,MAAR,EAAgB;AACd,iBAAK9B,IAAL,GAAY,OAAKA,IAAL,CAAU+B,MAAV,CAAiBhC,KAAKiC,GAAL,CAAS,UAACf,IAAD,EAAU;AAAEA,iBAAKgB,UAAL,GAAkB,OAAK/B,YAAL,CAAkBgC,QAAlB,CAA2BjB,KAAKkB,GAAhC,CAAlB,CAAwD,OAAOlB,IAAP;AAAa,WAA1F,CAAjB,CAAZ;AACD;AACD,eAAKmB,KAAL,CAAWC,eAAX,CAA2BC,KAA3B,CAAiC,yBAAjC;AACD,OAVH;AAWD,KAdM;AAePC,eAfO,uBAeKJ,GAfL,EAeU;AACf,UAAIK,cAAc,qCAAqCL,GAAvD;AACAM,cAAQC,GAAR,CAAYF,WAAZ;AACA;AACD,KAnBM;AAoBPG,iBApBO,yBAoBO1B,IApBP,EAoBa;AAClB,WAAKf,YAAL,CAAkBmB,IAAlB,CAAuBJ,KAAKkB,GAA5B;AACAhC,mBAAayC,OAAb,CAAqB,cAArB,EAAqCvC,KAAKwC,SAAL,CAAe,KAAK3C,YAApB,CAArC;AACD,KAvBM;AAwBP4C,sBAxBO,8BAwBY7B,IAxBZ,EAwBkB;AACvB,UAAIC,QAAQ,KAAKhB,YAAL,CAAkB6C,SAAlB,CAA4B,UAASC,CAAT,EAAY;AAClD,eAAOA,MAAM/B,KAAKkB,GAAlB;AACD,OAFW,CAAZ;AAGA,WAAKjC,YAAL,CAAkB+C,MAAlB,CAAyB/B,KAAzB,EAAgC,CAAhC;AACAf,mBAAayC,OAAb,CAAqB,cAArB,EAAqCvC,KAAKwC,SAAL,CAAe,KAAK3C,YAApB,CAArC;AACD,KA9BM;AA+BPgD,WA/BO,mBA+BCC,GA/BD,EA+BM;AACX,UAAIC,IAAIC,SAASC,aAAT,CAAuB,GAAvB,CAAR;AACAF,QAAEG,YAAF,CAAe,QAAf,EAAyB,QAAzB;AACAH,QAAEG,YAAF,CAAe,MAAf,EAAuBJ,GAAvB;AACAC,QAAEI,KAAF;AACD,KApCM;AAqCPC,aArCO,uBAqCK;AACV,WAAKzD,IAAL,GAAY,EAAZ;AACA,WAAKuB,OAAL;AACApB,mBAAayC,OAAb,CAAqB,aAArB,EAAoCvC,KAAKwC,SAAL,CAAe,KAAKjC,QAApB,CAApC;AACD;AAzCM,GApCa;AA+EtB8C,SA/EsB,qBA+EZ,CAAE;AA/EU,CAAR,CAAhB","file":"index.js","sourcesContent":["Vue.component('vue-infinite-loading', VueInfiniteLoading.default);\r\nlet indexView = new Vue({\r\n  el: '#app',\r\n  name: 'app',\r\n  data: {\r\n    list: [],\r\n    hasMore: true,\r\n    favoriteList: localStorage.getItem('favoriteList') ? JSON.parse(localStorage.getItem('favoriteList')) : [],\r\n    searchingText: '',\r\n    categories: [\r\n      {\r\n        text: '日剧',\r\n        value: 0,\r\n        currentId: 0\r\n      },\r\n      {\r\n        text: '动漫',\r\n        value: 1,\r\n        currentId: 0\r\n      }\r\n    ],\r\n    selected: localStorage.getItem('defaultCate') ? JSON.parse(localStorage.getItem('defaultCate')) : 0\r\n  },\r\n  computed: {\r\n    filteredList() {\r\n      var result = [];\r\n      this.list.forEach((item, index) => {\r\n        if ( this.list[index].title.indexOf(this.searchingText) !== -1 ) {\r\n          result.push(item);\r\n        }\r\n      })\r\n      return result;\r\n    },\r\n    currentId() {\r\n      return this.categories[+this.selected].currentId\r\n    }\r\n  },\r\n  methods: {\r\n    getMore() {\r\n      this.categories[this.selected].currentId = this.categories[this.selected].currentId + 1;\r\n      axios.get('/index/' + this.currentId, {\r\n          params: {\r\n            cate: this.selected\r\n          }\r\n        })\r\n        .then(({ status, data }) => {\r\n          if(data.length) {\r\n            this.list = this.list.concat(data.map((item) => { item.isFavorite = this.favoriteList.includes(item.aid); return item }));\r\n          }\r\n          this.$refs.infiniteLoading.$emit('$InfiniteLoading:loaded');\r\n        })\r\n    },\r\n    onCardClick(aid) {\r\n      var redirectUrl = 'http://www.bilibili.com/video/av' + aid;\r\n      console.log(redirectUrl);\r\n      // this.openUrl(redirectUrl);\r\n    },\r\n    addToFavorite(item) {\r\n      this.favoriteList.push(item.aid)\r\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteList))\r\n    },\r\n    removeFromFavorite(item) {\r\n      var index = this.favoriteList.findIndex(function(i) {\r\n        return i === item.aid\r\n      })\r\n      this.favoriteList.splice(index, 1)\r\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteList))\r\n    },\r\n    openUrl(url) {\r\n      var a = document.createElement('a');\r\n      a.setAttribute('target', '_blank');\r\n      a.setAttribute('href', url);\r\n      a.click();\r\n    },\r\n    resetCate() {\r\n      this.list = [];\r\n      this.getMore();\r\n      localStorage.setItem('defaultCate', JSON.stringify(this.selected))\r\n    }\r\n  },\r\n  mounted() {}\r\n});\r\n"]}