{"version":3,"sources":["index.js"],"names":["Vue","component","VueInfiniteLoading","default","indexView","el","name","data","list","currentId","hasMore","favoriteList","localStorage","getItem","JSON","parse","searchingText","computed","filteredList","result","_this","forEach","item","index","title","indexOf","push","methods","getMore","axios","get","then","status","console","log","length","concat","map","isFavorite","includes","aid","$refs","infiniteLoading","$emit","onCardClick","redirectUrl","addToFavorite","setItem","stringify","removeFromFavorite","findIndex","i","splice","openUrl","url","a","document","createElement","setAttribute","click","mounted"],"mappings":"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","file":"index.js","sourcesContent":["Vue.component('vue-infinite-loading', VueInfiniteLoading.default);\r\nlet indexView = new Vue({\r\n  el: '#app',\r\n  name: 'app',\r\n  data: {\r\n    list: [],\r\n    currentId: 0,\r\n    hasMore: true,\r\n    favoriteList: localStorage.getItem('favoriteList') ? JSON.parse(localStorage.getItem('favoriteList')) : [],\r\n    searchingText: ''\r\n  },\r\n  computed: {\r\n    filteredList: function() {\r\n      var result = [];\r\n      var _this = this;\r\n      _this.list.forEach(function(item, index) {\r\n        if ( _this.list[index].title.indexOf(_this.searchingText) !== -1 ) {\r\n          result.push(item);\r\n        }\r\n      })\r\n      return result;\r\n    }\r\n  },\r\n  methods: {\r\n    getMore() {\r\n      this.currentId = this.currentId + 1;\r\n      // var _this = this;\r\n      axios.get('/index/' + this.currentId)\r\n        .then(({ status, data }) => {\r\n          console.log(data);\r\n          if(data.length) {\r\n            this.list = this.list.concat(data.map((item) => { item.isFavorite = this.favoriteList.includes(item.aid); return item }));\r\n          }\r\n          this.$refs.infiniteLoading.$emit('$InfiniteLoading:loaded');\r\n        })\r\n    },\r\n    onCardClick(aid) {\r\n      var redirectUrl = 'http://www.bilibili.com/video/av' + aid;\r\n      console.log(redirectUrl);\r\n      // this.openUrl(redirectUrl);\r\n    },\r\n    addToFavorite(item) {\r\n      this.favoriteList.push(item.aid)\r\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteList))\r\n    },\r\n    removeFromFavorite(item) {\r\n      var index = this.favoriteList.findIndex(function(i) {\r\n        return i === item.aid\r\n      })\r\n      this.favoriteList.splice(index, 1)\r\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteList))\r\n    },\r\n    openUrl(url) {\r\n      var a = document.createElement('a');\r\n      a.setAttribute('target', '_blank');\r\n      a.setAttribute('href', url);\r\n      a.click();\r\n    }\r\n  },\r\n  mounted: function() {\r\n    // this.getMore();\r\n    // this.getMore();\r\n    // this.getMore();\r\n    // this.getMore();\r\n    // this.getMore();\r\n  }\r\n});\r\n"]}