{"version":3,"sources":["index.js"],"names":["Vue","component","VueInfiniteLoading","default","indexView","el","name","data","list","hasMore","favoriteList","localStorage","getItem","JSON","parse","searchingText","categories","text","value","currentId","selected","computed","filteredList","result","forEach","item","index","title","indexOf","push","methods","getMore","axios","get","params","cate","then","status","length","concat","map","isFavorite","includes","aid","$refs","infiniteLoading","$emit","onCardClick","url","openUrl","addToFavorite","setItem","stringify","removeFromFavorite","findIndex","i","splice","a","document","createElement","setAttribute","click","resetCate","mounted"],"mappings":"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","file":"index.js","sourcesContent":["Vue.component('vue-infinite-loading', VueInfiniteLoading.default);\nlet indexView = new Vue({\n  el: '#app',\n  name: 'app',\n  data: {\n    list: [],\n    hasMore: true,\n    favoriteList: localStorage.getItem('favoriteList') ? JSON.parse(localStorage.getItem('favoriteList')) : [],\n    searchingText: '',\n    categories: [\n      {\n        text: '日剧',\n        value: 0,\n        currentId: 0\n      },\n      {\n        text: '动漫',\n        value: 1,\n        currentId: 0\n      },\n      {\n        text: 'fixsub',\n        value: 2,\n        currentId: 0\n      }\n    ],\n    selected: localStorage.getItem('defaultCate') ? JSON.parse(localStorage.getItem('defaultCate')) : 0\n  },\n  computed: {\n    filteredList() {\n      var result = [];\n      this.list.forEach((item, index) => {\n        if ( this.list[index].title.indexOf(this.searchingText) !== -1 ) {\n          result.push(item);\n        }\n      })\n      return result;\n    },\n    currentId() {\n      return this.categories[+this.selected].currentId\n    }\n  },\n  methods: {\n    getMore() {\n      this.categories[this.selected].currentId = this.categories[this.selected].currentId + 1;\n      axios.get('/index/' + this.currentId, {\n          params: {\n            cate: this.selected\n          }\n        })\n        .then(({ status, data }) => {\n          if(data.length) {\n            this.list = this.list.concat(data.map((item) => { item.isFavorite = this.favoriteList.includes(item.aid); return item }));\n          }\n          this.$refs.infiniteLoading.$emit('$InfiniteLoading:loaded');\n        })\n    },\n    onCardClick({ url }) {\n      this.openUrl(url);\n    },\n    addToFavorite(item) {\n      this.favoriteList.push(item.aid)\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteList))\n    },\n    removeFromFavorite(item) {\n      var index = this.favoriteList.findIndex(function(i) {\n        return i === item.aid\n      })\n      this.favoriteList.splice(index, 1)\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteList))\n    },\n    openUrl(url) {\n      var a = document.createElement('a');\n      a.setAttribute('target', '_blank');\n      a.setAttribute('href', url);\n      a.click();\n    },\n    resetCate() {\n      this.list = [];\n      this.getMore();\n      localStorage.setItem('defaultCate', JSON.stringify(this.selected))\n    }\n  },\n  mounted() {}\n});\n"]}