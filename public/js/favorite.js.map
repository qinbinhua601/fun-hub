{"version":3,"sources":["favorite.js"],"names":["weekList","favoriteView","Vue","el","name","data","list","favoriteList","localStorage","getItem","JSON","parse","weekDays","methods","getData","axios","get","params","then","status","console","log","count","length","concat","map","item","isFavorite","includes","aid","moment","updated","day","push","eventHub","$emit","removeFromFavoriteList","index","findIndex","d","splice","setItem","stringify","removeFromWeekArray","removeIndex","mounted"],"mappings":"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","file":"favorite.js","sourcesContent":["const weekList = () => {\r\n  return [\"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\", \"周日\"];\r\n};\r\n\r\nlet favoriteView = new Vue({\r\n  el: \"#app\",\r\n  name: \"favorite\",\r\n  data: {\r\n    list: [],\r\n    favoriteList: localStorage.getItem(\"favoriteList\")\r\n      ? JSON.parse(localStorage.getItem(\"favoriteList\"))\r\n      : [],\r\n    weekList: weekList(),\r\n    weekDays: [[], [], [], [], [], [], []]\r\n  },\r\n  methods: {\r\n    getData() {\r\n      axios\r\n        .get(\"/favorite/list\", {\r\n          params: {\r\n            favoriteList: localStorage.getItem(\"favoriteList\")\r\n              ? JSON.parse(localStorage.getItem(\"favoriteList\"))\r\n              : []\r\n          }\r\n        })\r\n        .then(({ status, data }) => {\r\n          console.log(data);\r\n          let count = 0;\r\n          if (data.length) {\r\n            this.list = this.list.concat(\r\n              data.map(item => {\r\n                item.isFavorite = this.favoriteList.includes(item.aid);\r\n                this.weekDays[(moment(item.updated).day() + 6) % 7].push(item);\r\n                return item;\r\n              })\r\n            );\r\n          }\r\n          // navView.videoCount = this.list.length;\r\n          eventHub.$emit('update-video-count', this.list.length)\r\n        });\r\n    },\r\n    removeFromFavoriteList(item) {\r\n      let index = this.favoriteList.findIndex((d) => {\r\n        return d.aid === item.aid;\r\n      });\r\n\r\n      this.favoriteList.splice(index, 1);\r\n      localStorage.setItem(\"favoriteList\", JSON.stringify(this.favoriteList));\r\n\r\n      index = this.list.findIndex((d) => {\r\n        return d.aid === item.aid;\r\n      });\r\n\r\n      this.list.splice(index, 1);\r\n    },\r\n    removeFromWeekArray({ aid }, index) {\r\n      console.log(index);\r\n      let removeIndex = this.weekDays[index].findIndex(\r\n        item => item.aid === aid\r\n      );\r\n      this.weekDays[index].splice(removeIndex, 1);\r\n      removeIndex = this.favoriteList.findIndex(item => item === aid);\r\n      this.favoriteList.splice(removeIndex, 1);\r\n      localStorage.setItem(\"favoriteList\", JSON.stringify(this.favoriteList));\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getData();\r\n  }\r\n});\r\n"]}