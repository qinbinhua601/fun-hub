{"version":3,"sources":["favorite.js"],"names":["weekList","favoriteView","Vue","el","name","data","list","favoriteList","localStorage","getItem","JSON","parse","weekDays","methods","getData","axios","get","params","then","status","console","log","count","length","concat","map","item","isFavorite","includes","aid","push","removeFromFavoriteList","index","findIndex","d","splice","setItem","stringify","onCardClick","redirectUrl","openUrl","url","a","document","createElement","setAttribute","click","removeFromWeekArray","removeIndex","mounted"],"mappings":"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","file":"favorite.js","sourcesContent":["const weekList = () => {\r\n  return [\r\n    '周一',\r\n    '周二',\r\n    '周三',\r\n    '周四',\r\n    '周五',\r\n    '周六',\r\n    '周日'\r\n  ]\r\n}\r\n\r\nlet favoriteView = new Vue({\r\n  el: '#app',\r\n  name: 'favorite',\r\n  data: {\r\n    list: [],\r\n    favoriteList: localStorage.getItem('favoriteList') ? JSON.parse(localStorage.getItem('favoriteList')) : [],\r\n    weekList: weekList(),\r\n    weekDays: [ [], [], [], [], [], [], [] ]\r\n  },\r\n  methods: {\r\n    getData: function() {\r\n      axios.get('/favorite/list', {\r\n          params: {\r\n            favoriteList: localStorage.getItem('favoriteList') ? JSON.parse(localStorage.getItem('favoriteList')) : []\r\n          }\r\n        })\r\n        .then(({ status, data }) => {\r\n          console.log(data);\r\n          let count = 0;\r\n          if (data.length) {\r\n            this.list = this.list.concat(data.map((item) => {\r\n              item.isFavorite = this.favoriteList.includes(item.aid);\r\n              this.weekDays[count++ % 7].push(item);\r\n              return item;\r\n            }));\r\n          }\r\n\r\n        })\r\n    },\r\n    removeFromFavoriteList: function(item) {\r\n      let index = this.favoriteList.findIndex(function(d) {\r\n        return d.aid === item.aid\r\n      });\r\n\r\n      this.favoriteList.splice(index, 1);\r\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteList));\r\n\r\n      index = this.list.findIndex(function(d) {\r\n        return d.aid === item.aid;\r\n      });\r\n\r\n      this.list.splice(index, 1);\r\n\r\n    },\r\n    onCardClick(aid) {\r\n      var redirectUrl = 'http://www.bilibili.com/video/av' + aid;\r\n      console.log(redirectUrl);\r\n      this.openUrl(redirectUrl);\r\n    },\r\n    openUrl(url) {\r\n      var a = document.createElement('a');\r\n      a.setAttribute('target', '_blank');\r\n      a.setAttribute('href', url);\r\n      a.click();\r\n    },\r\n    removeFromWeekArray({aid}, index) {\r\n      console.log(index)\r\n      let removeIndex = this.weekDays[index].findIndex(item => item.aid === aid)\r\n      this.weekDays[index].splice(removeIndex, 1)\r\n      removeIndex = this.favoriteList.findIndex(item => item === aid)\r\n      this.favoriteList.splice(removeIndex, 1)\r\n      localStorage.setItem('favoriteList', JSON.stringify(this.favoriteList));\r\n    }\r\n  },\r\n  mounted: function() {\r\n    this.getData();\r\n  }\r\n});"]}