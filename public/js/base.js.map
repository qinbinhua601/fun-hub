{"version":3,"sources":["base.js"],"names":["eventHub","Vue","navView","el","name","data","showNav","videoCount","created","$on","newVideoCount","component","template","animLib","props","item","type","Object","index","Number","row","crazyMode","Boolean","default","methods","onFavoriteClick","isFavorite","$emit","computed","getDate","moment","updated","format","enterActiveClass","_","random","length","leaveActiveClass","getView","view","touch","document","documentElement","navigator","maxTouchPoints","msMaxTouchPoints","body","setAttribute","onscroll","debounce","$toTop","getElementById","scrollTop","style","display","leading","onclick","e","stopPropagation","window","standalone","noddy","remotes","addEventListener","event","target","nodeName","parentNode","href","indexOf","location","host","preventDefault"],"mappings":"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","file":"base.js","sourcesContent":["let eventHub = new Vue();\r\n\r\n// #top-nav view\r\nlet navView = new Vue({\r\n  el: '#top-nav',\r\n  name: 'top-nav',\r\n  data: {\r\n    showNav: false,\r\n    videoCount: 0\r\n  },\r\n  created() {\r\n    eventHub.$on('update-video-count', newVideoCount => {\r\n      this.videoCount = newVideoCount;\r\n    });\r\n  }\r\n});\r\n\r\n// define card component\r\nVue.component('card', {\r\n  template: `\r\n    <transition\r\n      name=\"list\",\r\n      :enter-active-class=\"enterActiveClass\",\r\n      :leave-active-class=\"leaveActiveClass\"\r\n    >\r\n      <div @click=\"$emit('on-card-click', item.aid)\" class=\"card\">\r\n        <div>\r\n          <div class=\"card-image\">\r\n            <a :href=\"item.url\" target=\"_blank\">\r\n              <img :src=\"item.img\" class=\"img-responsive\" />\r\n            </a>\r\n            <span :class=\"[item.isFavorite ? 'glyphicon-heart' : 'glyphicon-heart-empty']\" @click.stop=\"onFavoriteClick(item)\" class=\"glyphicon\"></span>\r\n          </div>\r\n          <h4 class=\"card-title\">{{ item.title }}</h4>\r\n          <div class=\"card-bottom\">\r\n            <span>{{ getDate }}</span>\r\n            <span class=\"pull-right\">\r\n              <span class=\"glyphicon glyphicon-eye-open\"></span>\r\n              <i>{{ getView }}</i>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </transition>`,\r\n  data() {\r\n    return {\r\n      animLib: [\r\n        'fadeInRight',\r\n        'fadeOutLeft',\r\n        'bounceIn',\r\n        'bounceOut',\r\n        'rotateIn',\r\n        'rotateOut'\r\n      ]\r\n    };\r\n  },\r\n  props: {\r\n    item: {\r\n      type: Object\r\n    },\r\n    index: {\r\n      type: Number\r\n    },\r\n    row: {\r\n      type: Number\r\n    },\r\n    crazyMode: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  methods: {\r\n    onFavoriteClick(item) {\r\n      item.isFavorite = !item.isFavorite;\r\n      if (item.isFavorite) {\r\n        this.$emit('on-card-add-to-favorite', item);\r\n      } else {\r\n        this.$emit('on-card-remove-from-favorite', item);\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    getDate() {\r\n      return moment(this.item.updated).format('YYYY-MM-DD HH:mm:ss');\r\n    },\r\n    enterActiveClass() {\r\n      return this.crazyMode\r\n        ? this.animLib[\r\n            _.random(0, this.animLib.length - 1) * (this.animLib.length - 1)\r\n          ]\r\n        : 'zoomIn';\r\n    },\r\n    leaveActiveClass() {\r\n      return this.crazyMode\r\n        ? this.animLib[\r\n            _.random(0, this.animLib.length - 1 + 1) *\r\n              (this.animLib.length - 1) +\r\n              1\r\n          ]\r\n        : 'zoomOut';\r\n    },\r\n    getView() {\r\n      return this.item.view >= 100000000\r\n        ? this.item.view / 100000000 + '亿'\r\n        : this.item.view >= 10000\r\n            ? this.item.view / 10000 + '万'\r\n            : this.item.view;\r\n    }\r\n  }\r\n});\r\n\r\n// detecting if touch mobile device\r\nvar touch =\r\n  'ontouchstart' in document.documentElement ||\r\n  navigator.maxTouchPoints > 0 ||\r\n  navigator.msMaxTouchPoints > 0;\r\n\r\n// for disabling the hover css effect\r\nif (!touch) {\r\n  document.body.setAttribute('class', 'pc');\r\n}\r\n\r\ndocument.body.onscroll = _.debounce(\r\n  () => {\r\n    let $toTop = document.getElementById('to-top');\r\n    if (document.body.scrollTop > 100) {\r\n      $toTop.style.display = 'block';\r\n    } else {\r\n      $toTop.style.display = 'none';\r\n    }\r\n  },\r\n  200,\r\n  {\r\n    leading: true\r\n  }\r\n);\r\n\r\ndocument.getElementById('to-top').onclick = function(e) {\r\n  e.stopPropagation();\r\n  this.style.display = 'none';\r\n  document.body.scrollTop = 0;\r\n};\r\n\r\n// prevent add to home screen app, A link to open by safari\r\nif ('standalone' in window.navigator && window.navigator.standalone) {\r\n  var noddy, remotes = false;\r\n  document.addEventListener(\r\n    'click',\r\n    function(event) {\r\n      noddy = event.target;\r\n      while (noddy.nodeName !== 'A' && noddy.nodeName !== 'HTML') {\r\n        noddy = noddy.parentNode;\r\n      }\r\n      if (\r\n        'href' in noddy &&\r\n        noddy.href.indexOf('http') !== -1 &&\r\n        (noddy.href.indexOf(document.location.host) !== -1 || remotes)\r\n      ) {\r\n        event.preventDefault();\r\n        document.location.href = noddy.href;\r\n      }\r\n    },\r\n    false\r\n  );\r\n}\r\n"]}