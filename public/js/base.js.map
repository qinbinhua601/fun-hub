{"version":3,"sources":["base.js"],"names":["eventHub","Vue","navView","el","name","data","showNav","videoCount","created","$on","newVideoCount","component","template","animLib","props","item","type","Object","index","Number","row","crazyMode","Boolean","default","methods","onFavoriteClick","isFavorite","$emit","computed","getDate","moment","updated","format","enterActiveClass","_","random","length","leaveActiveClass","getView","view","touch","document","documentElement","navigator","maxTouchPoints","msMaxTouchPoints","body","setAttribute","onscroll","debounce","$toTop","getElementById","scrollTop","style","display","leading","onclick","e","stopPropagation","window","standalone","noddy","remotes","addEventListener","event","target","nodeName","parentNode","href","indexOf","location","host","preventDefault"],"mappings":"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","file":"base.js","sourcesContent":["let eventHub = new Vue();\n\n// #top-nav view\nlet navView = new Vue({\n  el: '#top-nav',\n  name: 'top-nav',\n  data: {\n    showNav: false,\n    videoCount: 0\n  },\n  created() {\n    eventHub.$on('update-video-count', newVideoCount => {\n      this.videoCount = newVideoCount;\n    });\n  }\n});\n\n// define card component\nVue.component('card', {\n  template: `\n    <transition\n      name=\"list\",\n      :enter-active-class=\"enterActiveClass\",\n      :leave-active-class=\"leaveActiveClass\"\n    >\n      <div @click=\"$emit('on-card-click', item.aid)\" class=\"card\">\n        <div>\n          <div class=\"card-image\">\n            <a :href=\"item.url\" target=\"_blank\">\n              <img :src=\"item.img\" class=\"img-responsive\" />\n            </a>\n            <span :class=\"[item.isFavorite ? 'glyphicon-heart' : 'glyphicon-heart-empty']\" @click.stop=\"onFavoriteClick(item)\" class=\"glyphicon\"></span>\n          </div>\n          <h4 class=\"card-title\">{{ item.title }}</h4>\n          <div class=\"card-bottom\">\n            <span>{{ getDate }}</span>\n            <span class=\"pull-right\">\n              <span class=\"glyphicon glyphicon-eye-open\"></span>\n              <i>{{ getView }}</i>\n            </span>\n          </div>\n        </div>\n      </div>\n    </transition>`,\n  data() {\n    return {\n      animLib: [\n        'fadeInRight',\n        'fadeOutLeft',\n        'bounceIn',\n        'bounceOut',\n        'rotateIn',\n        'rotateOut'\n      ]\n    };\n  },\n  props: {\n    item: {\n      type: Object\n    },\n    index: {\n      type: Number\n    },\n    row: {\n      type: Number\n    },\n    crazyMode: {\n      type: Boolean,\n      default: true\n    }\n  },\n  methods: {\n    onFavoriteClick(item) {\n      item.isFavorite = !item.isFavorite;\n      if (item.isFavorite) {\n        this.$emit('on-card-add-to-favorite', item);\n      } else {\n        this.$emit('on-card-remove-from-favorite', item);\n      }\n    }\n  },\n  computed: {\n    getDate() {\n      return moment(this.item.updated).format('YYYY-MM-DD HH:mm:ss');\n    },\n    enterActiveClass() {\n      return this.crazyMode\n        ? this.animLib[\n            _.random(0, this.animLib.length - 1) * (this.animLib.length - 1)\n          ]\n        : 'zoomIn';\n    },\n    leaveActiveClass() {\n      return this.crazyMode\n        ? this.animLib[\n            _.random(0, this.animLib.length - 1 + 1) *\n              (this.animLib.length - 1) +\n              1\n          ]\n        : 'zoomOut';\n    },\n    getView() {\n      return this.item.view >= 100000000\n        ? this.item.view / 100000000 + '亿'\n        : this.item.view >= 10000\n            ? this.item.view / 10000 + '万'\n            : this.item.view;\n    }\n  }\n});\n\n// detecting if touch mobile device\nvar touch =\n  'ontouchstart' in document.documentElement ||\n  navigator.maxTouchPoints > 0 ||\n  navigator.msMaxTouchPoints > 0;\n\n// for disabling the hover css effect\nif (!touch) {\n  document.body.setAttribute('class', 'pc');\n}\n\ndocument.body.onscroll = _.debounce(\n  () => {\n    let $toTop = document.getElementById('to-top');\n    if (document.body.scrollTop > 100) {\n      $toTop.style.display = 'block';\n    } else {\n      $toTop.style.display = 'none';\n    }\n  },\n  200,\n  {\n    leading: true\n  }\n);\n\ndocument.getElementById('to-top').onclick = function(e) {\n  e.stopPropagation();\n  this.style.display = 'none';\n  document.body.scrollTop = 0;\n};\n\n// prevent add to home screen app, A link to open by safari\nif ('standalone' in window.navigator && window.navigator.standalone) {\n  var noddy, remotes = false;\n  document.addEventListener(\n    'click',\n    function(event) {\n      noddy = event.target;\n      while (noddy.nodeName !== 'A' && noddy.nodeName !== 'HTML') {\n        noddy = noddy.parentNode;\n      }\n      if (\n        'href' in noddy &&\n        noddy.href.indexOf('http') !== -1 &&\n        (noddy.href.indexOf(document.location.host) !== -1 || remotes)\n      ) {\n        event.preventDefault();\n        document.location.href = noddy.href;\n      }\n    },\n    false\n  );\n}\n"]}